<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Will Edward&#39;s Programming: classic</title>
    <link rel="stylesheet" type="text/css" href="static/style.css"/>

</head>
<body>
<div class="content">
<div class="column">
    <div style="width: 90%;" class="page-link" onclick="window.location='index.html'">
    <h1>Will Edwards<br/><i>programming</i></h1>
    </div>
    <p>Always loved programming - its like Lego without gravity.</p>
    <p>Basic on my ZX81 graduating to assembler and Turbo Pascal during my teens.</p>
    <p>Developed phone OS software - engineer, architect, product manager - but got made irrelevant by the
        iPhone and redundant by Android.</p>
    <p style="font-size: 16pt; width:90%;">These days I mostly work with <b>data</b>, <b>big data</b> and <b><i>fitting big data onto small boxes</i></b>.</p>
</div>
<div class="posts-column column">
    <div class="page-title">
    <h1>classic</h1>
    
    
        <hr/>
        <div class="index-bar">
        <button class="page-prev-link page-link" onclick="window.location='classic.html'">&larr;&nbsp;prev</button>
        <div class="pages-index">page 2 of 2</div>
        
        </div>
    

    </div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/15581427232.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="917">
    <h2>Self-organizing Reddit?</h2>
</a>
<?xml version="1.0" ?><post-body><p>Reddit and other sites use categorization instead.  So <strong>I prototyped a
                self-organizing news site</strong> and it worked great.  Here’s the background, and how
                it worked:</p>
                <p><!-- more --></p></post-body>
 <button class="page-link" onclick="window.location='index5.html#917'">index</button> 
<button class="page-link" onclick="window.location='post/15581427232.html'"><b>read&nbsp;more&nbsp;&rarr;</b></button>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/15210221400.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="921">
    <h2>Visualising iPhone Tracking Data</h2>
</a>
<?xml version="1.0" ?><post-body><p>A long time ago quite it got quite a bit of press that the iPhone records all your
                location fixes.  In fact, most phones do this.  Anyway, my mate Roy did an<a href="http://www.redcode.nl/blog/2011/04/reading-iphone-gps-data-from-backup-with-java/" target="_blank">
                iPhone tracker app in Java</a>.</p>
                <p>I thought that making people download something was quite a high barrier, and it’d be
                much better for people to just drag-n-drop their files onto a webpage…</p>
                <p>I’ve only done HTML when I’ve had to, and the whole new drag-n-drop APIs
                were new to me but I managed to get this working.  However, parsing the btrees in the SQLite databases
                was going to take some learning of Javascript.</p>
                <p>Then I found that a chap called Mark Olson was showing off a Javascript SQLite DB parser
                online.</p>
                <p>So I roped him into helping get a quick drag-n-drop tracker up and running.  The result was
                gorgeous: <em><strong><a href="http://markolson.github.com/js-sqlite-map-thing/" target="_blank">http://markolson.github.com/js-sqlite-map-thing/ </a></strong></em></p>
                <p>It turns out people have no squirms dragging and dropping their private backup files - often
                all their files, and not just picking out the files we ask for even - onto a webpage running code we
                wrote.  Perhaps its naivety.</p>
                <p>However, its hosted on github using the gh-pages system.  And this makes for a <em><strong>very
                interesting security angle</strong></em>.  Assuming that github themselves are honest, and
                that your Internet connection is not being fiddled with (its HTTP but really do you trust HTTPS these
                days anyway?), the full <em>change-history</em> of what we are asking you to run is public.</p>
                <p>I imagine the tracking is better secured these days - I’d be surprised if the iPhone
                has stopped recording the data, but I’d also be surprised if it was as easily accessible. 
                Despite this, the web-page is still getting a steady stream of visitors.</p>
            </post-body>
 <button class="page-link" onclick="window.location='index5.html#921'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/13265308156.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="944">
    <h2>Openning Streams by MIME-type</h2>
</a>
<?xml version="1.0" ?><post-body><p><span>Back in 2004 I published this on an OS hobby site.  I never heard of any
                hobbyists actually doing anything I suggested conceptually.</span><br/><br/>This
                article offers feature suggestions to budding OS developers looking for that neat edge. This osnews
                mini-series is a series to give people developing hobby operating systems - for fun - ideas that take
                their OS from a kernel to a ‘system’.</p>
                <p>In previous articles we have described using URIs [1] for file paths and the idea that streams
                of various types can be transparently converted between by the operating system [2]. This article
                describes how these might be unified into a single, consistent user interface.</p>

                <img alt="Opening Streams" border="0" height="307" src="http://sites.google.com/site/williamedwardscoder/_/rsrc/1279396222293/streams.jpg?height=307&amp;width=495" width="495"/><p>UNIX has the design principle that 'everything is a file’ [3]. A file
                is, more properly, a stream. I have introduced, in the previous article, the idea that a stream, if we
                know its type, might be presented transparently to a program as another, compatible type. This means
                that conceptually a file is in fact many streams, with each stream marked by type [4].</p>
                <p>Streams don’t just refer to physical files on your computer or remote computers.
                Streams can be generated by other things such as applications and device drivers. In UNIX, named pipes
                and UNIX-domain sockets provide this kind of facility [5].</p>
                <p>Many UNIX programs are an excellent example of applications that provide streams
                programmatically. The 'sort’ command takes one stream as input and outputs to another, as does
                the 'grep’ command. In fact, all command line programs do this. As our hobby operating system
                is marking streams by type, you could expect all these command line applications to be reading and
                writing text/plain streams. If you want to 'grep’ on a rich document, for example, the
                operating system would be quite capable of converting that to text/plain - if the virtual file system
                has the right plug-in - and 'grep’ need not know [6].</p>
                <p>We’ll make the jump that your hobby OS includes a GUI of sorts! How might
                applications provide streams for the user to interact with?</p>
                <p>GUI widgets (windows, even individual controls such as text boxes) might report to the system
                that they provide/consume streams of certain mime-types. This would allow the window manager to provide
                drag-n-drop stream connections and work as a versatile clip-board. This is not so strange - this is
                pretty much what the windows clipboard is doing anyway!</p>
                <p>So think of 'open’ and 'save’ as reading and writing streams, rather than
                files (a slightly thin distinction to make, I know). Applications conventionally use standard system
                dialogs for allowing the user to select files to open and names of files to save-as. This allows the
                hobby operating system author to unify application streams, remote streams and file streams and present
                them to the user in a sensible manner.</p>
                <p>You’ll see from my dialog mockup that I allow the user to select from a recent
                streams history, from a location (much like a conventional file-open dialog) and by type. This later
                category is something akin to a search. Popular consensus in the human-computer-interaction camp at the
                moment seems to think that users don’t really remember where they put files or what they are
                called. Modern operating systems such as BeOS, Windows and the like are moving in the direction of
                letting the user search for files instead. This is the whole big idea behind the 'file system is a
                database’ hype at the moment!</p>
                <p>So the user doesn’t care where the stream comes from, they care only that they find
                their stream. The 'by type’ presents all files of the appropriate type, regardless of
                location. In the example dialog an application-provided stream is shown highlighted, mixed in with
                streams provided by conventional files from the user’s home directory.</p>
                <p>A 'by type’ query that is constantly updating live is termed an 'active query’
                and is one of the many big features in BeOS. The idea is that, while you have a search window open,
                files that are added, modified or removed that fit the terms of the query are automatically updated [7].</p>
                <p>The Save-As dialog might also present application streams as valid destinations. A user might
                'save’ a bitmap to their presentation software which is running at the moment, and that
                presentation software might insert that received image file into the actively-being-edited application.</p>
                <p>Opening a stream is assisted by search agents. The idea is that various mime-types might
                register search agents that take words, phrases or even complex query expressions and filter a list
                based upon user-entered criteria. You might want to only documents that contain a reference to a certain
                activity, for example. Various search agents might use meta-data, a contextual search or an index to
                find matches; it depends upon the mime-type and the agent’s needs.</p>
                <p>It could be taken further and integrate search agents that represent remote locations e.g.
                coalescing a Google search into a local files search.</p>
            </post-body>
 <button class="page-link" onclick="window.location='index6.html#944'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/13265217305.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="945">
    <h2>Network Transparency and Multi-Root Filesystems</h2>
</a>
<?xml version="1.0" ?><post-body><div><span>I published this short article to an hobby OS site in 2004.  I don’t
                think the idea has aged a bit!</span><br/><br/>This article offers feature suggestions
                to budding OS developers looking for that neat edge.
                <p>Wouldn’t it be real nice if <code>FILE *f =
                fopen(&quot;ftp://www.microsoft.com/mission/statement.html&quot;,&quot;r&quot;);</code> just worked?</p>
                <p>People have been dreaming of ‘mounting’ remote filesystems on demand for a
                long time. It seems to be a popular pastime for <a href="http://www.joelonsoftware.com/articles/fog0000000041.html" rel="nofollow"> architecture
                astronauts</a>. Despite Joel’s warnings to run from network transparency, I vote that
                you don’t!</p>
                <p>Client-side libraries allow a program to access remote resources in the same way as local ones,
                for example the excellent <a href="http://www.gnu.org/directory/libs/libferris.html" rel="nofollow">libferris</a>.</p>
                <p>A new operating system that integrated such handling into the platform level (rather than an
                additional, optional library) would have the advantage that each and every application could access the
                same resources. The 'ls’ in the ported bash prompt would be able to list the contents of an
                FTP directory, and the notepad clone would load your text files whether they were local, on some window
                server, or the other side of the internet.</p>
                <p>Users work with and are familiar with URIs, so URIs are the natural way of expressing a file
                name and location. The filesystem ought to work with URIs.</p>
                <p>Imagine the following snippet of fictious commandline:</p>
                <pre>&gt; pwd<br/>file:///home/me/<br/>&gt; cd <a href="http://www.microsoft.com">http://www.microsoft.com</a><br/>&gt; cd mission<br/>&gt;
                ls<br/>. .. statement.html<br/>&gt; rm mission.html<br/>access denied.</pre>
                <p>The use of URIs introduces what I term the ’<strong>Multi-Root Filesystem</strong>’.
                The protocol, e.g. “file”, “smb” or “webdav”,
                is a root. All protocols are peers of each other, and you can’t navigate between them in
                relative paths (i.e. no “file://home/me/../../../http://remote”).</p>
                <p>Protocol handlers are global to the user or system. The file structure might be made upon
                demand, with the contents of “http://” reading like recent internet history; whereas
                “file://” might countain the local UNIX-style root “/” which
                contains in-turn “home” and “bin” etc.</p>
                <p>Provide your system with a new protocol handler and suddenly all applications can use files
                available via that mechanism.</p>
                <p>Obviously opening a file over ftp is possibly a million miles more complicated than opening a
                local file. When allowing the same API to be used to access both local and remote file-like resources,
                things that rarely go wrong on local operations (such as takes a long time, might fail) happen a lot
                more often. That the average programmer never checks that things fail/succeed and always putting IO into
                the UI thread is just plain bad, for both local and remote resources. It would have to be thought about.
                Massively multi-threaded message-passing operating systems might have the edge in this respect.</p>
                <p>A unified, transparent network access for many protocols does not remove the need for dedicated
                protocol handling libraries for specialist programs. But it does make the average program suddenly much
                more powerful and useful to the average user!</p>
                <p>It is worth mentioning an additional feature for the interested OS developer to research:
                auto-mounting archives and encrypted files transparently, e.g. “sftp://www.mycom.org/mail/archives/2004-07.zip.pgp/get
                rich quick.msg”.</p>
                </div>
            </post-body>
 <button class="page-link" onclick="window.location='index6.html#945'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/13265116869.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="946">
    <h2>Files and Programmatic Streams</h2>
</a>
<?xml version="1.0" ?><post-body><div><span>I originally published this on an OS hobby site in 2004; as I started
                actually working as an engineer on an operating system at that time, I stopped publishing ideas as a
                hobby ;)</span><br/><br/>This article offers feature suggestions to budding OS
                developers looking for that neat edge.
                <p>Conventionally, each file on a computer system has a type. Different operating systems
                typically had different ways of working out the logical type of a file. UNIX uses a special flag to see
                if a file was ‘executable’, otherwise it is 'data’. Therefore,
                applications on UNIX have a variety of strategies for determining the file type. Some programs use the
                file extension as a hint (.jpeg is probably an image, for example) whereas others use more advanced
                heuristics (e.g. the UNIX 'file’ command) sometimes called 'magic’. MS-DOS and
                MS-Windows use the file extension to determine the type (.exe for executables, .txt for text files etc).
                More recent operating systems have embraced more recent classification systems such as MIME. In BeOS,
                for example, a server scans files and marks the MIME type of them in an attribute (basically caching the
                guess from the UNIX-style 'file’ heuristics) so that it can easily be looked at later. Almost
                all Internet content is marked with a MIME type (web pages, files received via email etc) and this can
                clearly indicate to the receiving computer the intended type of a file.</p>
                <p>Now let me introduce something slightly novel and new! Imagine that our new hobby operating
                system supports multi-stream files. Each stream in a file is a certain MIME type. Some of these streams
                might be generated programmatically on-the-fly, and basically encapsulate conversion. These programmatic
                streams allow plug-in filters and converters to be integrated into the operating system and used by
                programs. Let us explore what this might mean and how it might be used by programs:</p>
                <p>The operating system knows the actual MIME type of a file. It also has a list of programmatic
                stream plug-ins associated with each MIME type to handle the interpretation of a stream of one type into
                that of another. An obvious plug-in would be to filter text/html so that it was text/plain, stripping
                out the markup. Another plug-in might convert image/jpeg to image/gif. Another might extract the
                soundtrack of a movie file and present it as audio/wav.</p>
                <p>An application/x-idx file might have a programmatic stream of type text/gnu-makefile, while
                another programmatic stream might convert text/gnu-makefile streams into application/bash shell scripts.
                Therefore the operating system can string together these streams transparently, making an
                application/x-idx file executable in at a bash prompt.</p>
                <p>Encodings and character sets might also be incorporated into the same system, for on-the-fly
                conversion between various sets. A code snippet:</p>
                <p>FILE *f = fopen_ex(“ftp://stop.blogging.com/varfar/myos.zip/documents/filesystem.pdf”,“rb”,“text/html;charset=
                iso-8859-1”);</p>
                <p>A file selector dialog might have the file type set as a MIME type and display all documents
                that match a specific MIME type that the application understands without the application having to
                understand the conversion process.</p>
                <p>Most conversions are lossy ’ they remove information and meta-data, downgrading the
                quality of a source. Therefore, it is anticipated that almost all programmatic streams might be
                read-only. Many programmatic plug-ins’ might be easiest to implement if they support
                sequential access only. For this reason, it makes sense for the file selector dialog to be able to
                filter out streams with inappropriate access (e.g. only display application/ogg streams that are
                writeable and support random access). However, the opportunity is there for super plug-ins that
                facilitates content stored as one type to be completely edited as another, e.g. reading and writing to
                an application/ms-word file with an application that only understands application/x-multipart-html.</p>
                <p>Let me extend the idea even further. Not only might a file be multi-streamed, it might also be
                multi-part! Many file formats encapsulate multiple content parts ’ a movie has both image
                frames and a soundtrack; a rich document has text, drawing and images embedded; a mail message might
                contain a plain-text version, a rich text version or two and many attachments. An archive contains
                multiple files inside.</p>
                <p>Such files could be presented to programs as directories. You could now use your favorite
                drawing program to edit the individual frames of a movie!</p>
                <p>Directories themselves can have streams too. In the case of a virtual directory being generated
                from a single file, the directory’s stream would be the actual physical file (and programmatic
                streams that convert it). A conventional directory might have a text/html stream the serves the
                index.html file that it contains; another directory stream might provide a tar file of it and its
                children.</p>
                <p>Conversion libraries on most operating systems abound. Typically these libraries are
                fragmented, often unwieldy, often exposing technical details, and not pervasively used.</p>
                <p>A new hobby operating system has the opportunity to provide a uniform interface between
                applications and these conversion filters, in a way that is minimum effort for application programmers
                and in a way that is extendable (by providing more conversion filter plug-ins) without requiring extra
                code nor recompiling or re-linking of all applications. Placing this conversion into the way that files
                are provided to applications is, in my opinion, an excellent way to achieve this.</p>
                <p>Programmatic streams do not expose many parameters to tweak conversion and therefore do not
                completely replace the need for dedicated, detailed conversion libraries for dedicated programs. But
                they do further the usability of the average program in the normal operating scenario.</p>
                </div>
            </post-body>
 <button class="page-link" onclick="window.location='index6.html#946'">index</button> 

</div>


    
        
        <div class="index-bar">
        <button class="page-prev-link page-link" onclick="window.location='classic.html'">&larr;&nbsp;prev</button>
        <div class="pages-index">page 2 of 2</div>
        
        </div>
    

</div>


<div class="column">
    <div class="page-map">
        
            

    <div class="page-map-branch">
    <b>databases</b>
        
            <img class="feather" src="static/icons/database.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/172424230628.html'">Faster searches with non-prefix fields in composite indices</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/160628887798.html'">Compressing MySQL databases</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/26063783576.html'">LevelDB isn&#39;t the fastest kid in town</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/25080396258.html'">Oh MySQL I hate you</div>
                
            
                
                    <div class="page-link" onclick="window.location='db.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
        
    </div>


        
            

    <div class="page-map-branch">
    <b>performance</b>
        
            <img class="feather" src="static/icons/bar-chart-2.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53836725910.html'">What highscalability.com says about Scaling my Server</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53751799442.html'">Scaling my Server: follow-up</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53349845356.html'">Scaling my Server</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/35134924139.html'">A novel profiler for Python</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/13590981677.html'">Performance lessons for HTTP sockets</div>
                
            
                
            
        
    </div>


        
            

    <div class="page-map-branch">
    <b>old classics</b>
        
            <img class="feather" src="static/icons/book-open.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53349845356.html'">Scaling my Server</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/49786413417.html'">The kid&#39;s computer</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/43394068341.html'">Ruby&#39;s Principle of Too Much Power</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/42912076785.html'">Why is Ruby bad security?</div>
                
            
                
                    <div class="page-link" onclick="window.location='classic.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        
    </div>


        
            

    <div class="page-map-branch">
    <b>general</b>
        
            <img class="feather" src="static/icons/terminal.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/134911547413.html'">Why Swift?</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/94734034483.html'">Python annotations and type checking</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/86488099258.html'">pycon 2014 Sweden: the bad bits</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/78636919764.html'">Table-based Template Translation in C++</div>
                
            
                
                    <div class="page-link" onclick="window.location='lang.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        
    </div>


        
            

    <div class="page-map-branch">
    <b>recreation</b>
        
            <img class="feather" src="static/icons/youtube.svg"/>
        
        
            <div class="page-link" onclick="window.location='rec.html'">all&nbsp;&rarr;</div>
            <div class="page-map-section">
            
                

    <div class="page-map-branch">
    <b>games programming</b>
        
            <img class="feather" src="static/icons/play.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/57181055984.html'">Perlin Noise</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/57140204975.html'">Perlin Noise</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53831974133.html'">Drawing RTS maps fast</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/49797579721.html'">WillCity update</div>
                
            
                
                    <div class="page-link" onclick="window.location='game.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        
    </div>


            
                

    <div class="page-map-branch">
    <b>ludum-dare</b>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/143376853353.html'">Ludum Dare #35 Mosaic</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/127137593983.html'">LudumDare 33 wallpapers</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/117234199303.html'">SSIM vs MSE for Mosaics</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/97634254788.html'">Ludum Dare 30 results are in!</div>
                
            
                
                    <div class="page-link" onclick="window.location='ludum-dare.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
        
    </div>


            
        
    </div>


        
    </div>
</div>
</div>
</body>
</html>