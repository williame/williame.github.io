<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <title>Will Edward&#39;s Programming: rec</title>
    <link rel="stylesheet" type="text/css" href="static/style.css"/>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-27302158-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-27302158-1');
    </script>

</head>
<body>
<div class="content">
<div class="column">
    <div style="width: 90%;" class="page-link" onclick="window.location='index.html'">
    <h1>Will Edwards<br/><i>programming</i></h1>
    </div>
    <p><b>I have always loved programming</b> - its like Lego without gravity.</p>
    <p>Basic on my ZX81 graduating to assembler and Turbo Pascal during my teens.</p>
    <p>Developed phone OS software - engineer, architect, product manager - but got made irrelevant by the
        iPhone and redundant by Android.</p>
    <p style="font-size: 16pt; width:90%;">These days I mostly work with <b>data</b>, <b>big data</b> and <b><i>fitting big data onto small boxes</i></b>.</p>
</div>
<div class="posts-column column">
    <div class="page-title">
    <h1>rec</h1>
    
    
        <hr/>
        <div class="index-bar">
        <button class="page-prev-link page-link" onclick="window.location='rec.html'">&larr;&nbsp;prev</button>
        <div class="pages-index">page 2 of 4</div>
        <button class="page-next-link page-link" onclick="window.location='rec2.html'">next&nbsp;&rarr;</button>
        </div>
    

    </div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/69583927490.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="69583927490">
    
</a>
<?xml version="1.0" ?><post-body><p>I was packing away an old unused computer that I’d been letting my
                daughters <a href="post/19500788060.html">play
                with</a> - they have more modern laptops <a href="post/49786413417.html">now</a> - when
                I realised it was the last computer I had with a floppy disk drive!</p>
                <p>So I went out to my storage and found whole stack of old floppies.  These date from about 2000
                until 2004; sadly nothing from school days nor uni :(</p>
                <p>The internet was still young, then, and whilst I’d got my first dial-up when at uni
                it wasn’t until my work life started properly in Gamla Stan, Stockholm that I had real
                internet access.  Online there was an extensive game modding community, and the internet was a nice
                safe-feeling fun-feeling exciting place to hang out.  I’ve never been a big game player, but I’ve
                always been a big hobby game maker.</p>
                <p>One of my projects then was making modding tools for the Command &amp; Conquer Tiberian Sun
                game.  I’d been making voxel editors at uni, but by the year 2000 the source to the first
                voxel editor had been lost, and I’d had to make a second voxel editor.</p>
                <p>The Tiberian Sun units were stored as <a href="https://en.wikipedia.org/wiki/Voxel">voxels</a>
                - think of them as tiny cubes arranged to approximate a 3D representation - and my editors were the
                first user-friendly editor attempts for them.  They really opened up what was possible for modders, who
                adopted my tools - inadequacies and all - with glee.</p>
                <p>The <a href="post/30793134312.html">usual</a>
                <a href="post/53831974133.html">suspect</a> started
                making mods using the tools.  It was really his mods that made me make the tools, really.  In fact his
                interest came first.</p>
                <p>Later I started on an INI editor, which I modeled on the VB6 and Delphi IDEs.  And I made a SHP
                editor, SHP being the RLE-compressed image format used for buildings and ground tiles and such.</p>
                <p>The fun thing about the IDE is how its a list-box with a custom item drawer, and there’s
                a borderless text-edit control positioned over the current line.  Parsing of the line is deferred until
                you leave the line.  This works really really well, actually :)  I don’t think I ever started
                on cut-n-paste though.</p>
                <p>The key thing with the screenshots above is that they were all Delphi apps.  They ran on
                Windows 95 or 98 or NT, and they are tiny self-contained little executables without dependencies.  Wine
                runs them on my mac just fine.</p>
                <p>I also had some C++ (usually wxWidgets) apps too.  But I haven’t been able to run any
                of them with Wine because they load DLLs that Wine doesn’t have, and I can no longer compile
                them because of incompatibilities with newer wxWidgets headers and widechar issues that I made only
                five-second-evaluation attempts to fix.</p>
                <p>I also wrote a fast export script for 3DSMax.  Not very screenshot-able, but that was used by a
                Dutch modder who was a proper professional 3D chap.</p>
                <p>The very sad thing is all the projects that are pre 2000 that I seem to have no record left of.
                 I remember making maze wandering games and point-and-click adventures for DOS back in the 90s while at
                school, and I’d dearly love to see them and the usual suspect’s artwork for them
                again.</p>
                <p>But all in all, very happy memories :)  And now on a USB stick.  In a decade I’ll
                doubtless be throwing away my last computer with a USB jack, and hopefully I’ll remember to
                copy and rummage around in my old projects :)</p>
            <p><a href="media/old/69583927490_2.png"><img src="media/old/69583927490_1.png"/></a></p></post-body>
 <button class="page-link" onclick="window.location='index1.html#69583927490'">index</button> 

    <span class="post-metadata"><i>posted 2013-12-10</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/60190775649.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="60190775649">
    
</a>
<?xml version="1.0" ?><post-body><p>To: <em>All secret agents</em></p>
                <p>From: <em>NSA training directorate</em></p>
                <p>Subject: <strong><em>how-to use the NSA’s Cyber Remote Analyst Portal</em></strong></p>
                <p>Security: <strong><em>TOP SECRET</em></strong></p>
                <p>Play: <a href="http://www.ludumdare.com/compo/ludum-dare-27/?action=preview&amp;uid=10313" target="_blank">my game!</a></p>
            <iframe frameborder="0" src="https://www.youtube.com/embed/mfvg7LfmgGg"> </iframe></post-body>
 <button class="page-link" onclick="window.location='ludum-dare.html#60190775649'">ludum-dare</button>  <button class="page-link" onclick="window.location='index1.html#60190775649'">index</button> 

    <span class="post-metadata"><i>posted 2013-09-03</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/59997353762.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="59997353762">
    <h2 onclick="window.location='post/59997353762.html'">Running SQL in your browser</h2>
</a>
<?xml version="1.0" ?><post-body><p dir="ltr">As a key part of my Ludum Dare entry <font color="#4c4c4c"><a href="post/59476092289.html">The NSA’s Where’s
                Snowden?</a></font> game I wanted you - the elite NSA Analyst - to be able to <i>hack</i>
                the game world.  Imagine you could put your agents onto flights, or fiddle with the flight manifests so
                that targets were refused boarding or even arrested… and how would you do this?  I decided I wanted you
                to have SQL access to the world’s flight plan database…</p>
                <p dir="ltr">SELECT T.* FROM MANIFESTS AS M, MANIFESTS AS M2, TARGETS AS T WHERE T.PASS = M.PASS
                AND M.PASS = M2.PASS AND M.FLIGHT = ‘AF-321’ AND M2.FLIGHT = 'IB-794’;</p>
                <p dir="ltr">But I couldn’t find any working SQL engines for Javascript!  I didn’t find
                the emscripten SQLite. The only thing I could find was <font color="#4c4c4c"><a href="https://code.google.com/p/trimpath/wiki/TrimQuery">TrimQuery</a></font>, but I
                couldn’t get it to work and its quite old and not actively developed.  There’s are also a few LINQ-likes
                but they are not really SQL.</p>
                <p dir="ltr">Now SQL is the lingua franca of structured data querying so I was surprised at this
                sorry state of affairs.  Whilst LINQ is nice (because of the VS tooling!) I feel that a lot of the
                LINQ-likes are driven by hipster cargo-culting and that a solid SQL that can query conventional JS
                objects and arrays would be a powerful and useful thing.</p>
                <p dir="ltr">So I set out to build an SQL engine in Javascript (<font color="#4c4c4c"><a href="https://github.com/williame/ludum_dare_27_snowden/blob/gh-pages/sql.js">sql.js</a></font>). 
                It was perhaps more fun to develop than the other parts of the game and more fun to examine than the
                game is to play :)  It amazes me what I got working in ~4 hours and under 500 lines of code.  This blog
                post describes how it works (and how it can be done better):</p>
                <p dir="ltr"><b>How to use sql.js</b></p>
                <p dir="ltr">It consists of a single function SQL().  The parameters are:</p>
                <p dir="ltr">the SQL statement,  e.g. “INSERT INTO …”<br/></p>
                <p dir="ltr">the definition of the tables, which is a Javascript object acting as a dictionary. 
                Each table is itself an object, detailing the column names and specifying any constraints on them (e.g.
                if they must be unique or can be null) and optionally a description.  E.g. <br/><tt>{
                airports: { code:{description:“IATA code”,unique:true,notNull:true,},
                name:{notNull:true,}, country:{notNull:true,}, category:{description:“level of CIA
                infiltration”,}, lat:{description:“latitude (decimal degrees)”,},
                lng:{description:“longitude (decimal degrees)”,}, }, airlines: {
                code:{unique:true,notNull:true}, name:{}, country:{}, },…</tt></p>
                <p dir="ltr">table access; an object where each table name that the user can update has a boolean
                e.g. <br/><tt>( airports: false, flights: true,…</tt><br/>
                Any table name that is omitted is read-only.</p>
                <p dir="ltr">The data; an object where each table is a key and each table is an array of objects
                e.g. <br/><tt>{</tt><br/><tt>airports: [</tt><br/><tt>{code:“LHR”,name:”London
                Heathrow”,…</tt><br/><tt>],</tt><br/><tt>manifests: [</tt><br/><tt>…</tt></p>
                <p dir="ltr">params.  This object allows you to override things like setting the default row count
                LIMIT.<br/></p>
                <p dir="ltr">If the SQL cannot be parsed or if the table data does not have the expected fields
                then it throws an Error() exception.</p>
                <p dir="ltr">Otherwise it returns an object with a columns key and a rows key.  The columns are an
                array of strings which are the column titles.  Rows are an array of arrays.</p>
                <p dir="ltr"><b>Parsing SQL</b></p>
                <p dir="ltr">To parse a language you often use a parser generator like lex/flex yacc/bison.  There
                are parser generators for Javascript too - jison and peg and so on - but I haven’t used them and, to be
                honest, its quicker to just write our own parser from scratch.</p>
                <p dir="ltr">To parse SQL we can eat the statement a token at a time.  A token might be a number,
                an identifier or a symbol like an opening brace.</p>
                <p dir="ltr">Normally when I hand-roll a parser - its a bit of a recurring hobby of mine - I write
                the tokeniser to see what the next character is, and then based on whether that is a number, a quote
                mark or the beginning of an identifier or so on loop through until the token closes.  In sql.js however,
                I took a messy shortcut.</p>
                <p dir="ltr">When asking for the next token, I pass into the tokeniser the list of terminating
                strings e.g. when consuming table names in a FROM clause I’d ask for the next token (which I expect to
                be a table name) which can be followed by a comma, the word AS or the word WHERE or a semi-colon.  If my
                engine supported it, I could just add those additional possible keywords that follow a table name in the
                FROM clause e.g. ORDER, LIMIT and HAVING and JOIN and so forth.</p>
                <p dir="ltr">This meant that the next() function only had to do a Javascript string search -
                indexOf() - to find the nearest terminator.  However, this approach does have limitations e.g. it
                doesn’t properly parse strings (if the terminator occurs in the string the indexOf() will incorrectly
                find it) and words that contain keywords (the Airport table namehas OR in it, for example).  By the time
                you’ve added code to address this, you end up with a proper tokeniser anyway.  So in hindsight I should
                have doubled my line-count and just gone with a classic tokeniser in the first place.</p>
                <p dir="ltr"><b>Executing SQL</b></p>
                <p dir="ltr">Once the query is parsed and the array of table names built and, its just to execute
                the query.  And this is surprisingly simple using the <font color="#4c4c4c"><a href="https://en.wikipedia.org/wiki/Cartesian_product">Cartesian Product</a></font>.  If
                table A had two rowsand table B had two rows then the Cartesian Product would be:</p>
                <p dir="ltr"><tt>SELECT A.V, B.V FROM A, B;</tt><br/><tt>A.V | B.V</tt><br/><tt>1
                | 1</tt><br/><tt>1 | 2</tt><br/><tt>2 | 1</tt><br/><tt>2
                | 2</tt></p>
                <p dir="ltr">No surprises there.  But what if we add a WHERE clause?</p>
                <p dir="ltr"><tt>SELECT A.V, B.V FROM A, B WHERE A.V = 2;</tt><br/><tt>A.V
                | B.V</tt><br/><tt>2 | 1</tt><br/><tt>2 | 2</tt></p>
                <p dir="ltr">We can get that by first generating the Cartesian Product - simple by iteration and
                recursion - and then filtering the rows by evaluating the WHERE clause against each line!</p>
                <p dir="ltr">This is thoroughly inefficient.  If there are 100 rows in one table and 100 rows in
                another then the Cartesian Product is (100+100)^2 = 40,000 rows!  It would be much more efficient to
                evaluate - and cull - candidate rows as soon as possible e.g. before recursing into every B row first
                check if A.V is 2.</p>
                <p dir="ltr">In the NSA game it’s easy to be evaluating a Cartesian Product that is hundreds of
                thousands long, and this can take several seconds.</p>
                <p dir="ltr">The engine supports SELECT, INSERT, UPDATE and DELETE.  It doesn’t support the JOIN
                keyword but it does let you join in the WHERE clause (as described above).  It doesn’t support IN.  It
                additionally has SHOW TABLES, DESCRIBE table and CHECK table which provide utility.  Because of the
                needs of the game there is also some rudimentary access control so the ‘hacker’ can’t really hack - and
                break - the game itself e.g. rescheduling or deleting flights and other havoc.</p>
                <p dir="ltr">I made the whole thing case-insensitive but that could easily be removed for data
                values and comparisons themselves.</p>
                <p dir="ltr">I added support for literals but the only literal I added was ‘NOW’.  I treated all
                dates as strings and this allowed simple Javascript string comparison of dates.  I didn’t support any
                functions, but this would be very easy to add too.</p>
                <p dir="ltr"><b>Improving performance</b></p>
                <p dir="ltr">A proper SQL query planner (the code that decides the order that table rows are
                evaluated) has to understand the cost of retrieving rows (from disk and so on), but in Javascript RAM
                access speed is fairly equal and without indices you need full table spans so its just to filter tables
                by the parts of the WHERE clause that reference them as greedily as possible.</p>
                <p dir="ltr">Each table is an array of objects.  It would be straightforward to support arrays of
                arrays, and objects of arrays and objects of objects.  Using objects as the collections themselves would
                effectively be a primary key - an index!  Knowledge of this could dramatically speed up joins.</p>
                <p dir="ltr">The engine turns the incoming SQL into a chain of closures.  TrimQuery, by
                comparison, turns the SQL statement into a Javascript fragment that is then eval()ed.  I am not sure
                that is faster; doesn’t that cause the Javascript VM itself to abandon a lot of cached JITed code?  But
                it may be faster to instead compile the SQL down to a simple VM.</p>
                <p dir="ltr">If you are running the same query again and again it would certainly help to
                ‘compile’ or ‘prepare’ the SQL statement once and have a way to run it again and again against data</p>
                <p dir="ltr">sql.js is surprising short given what it can do, and surprisingly simple.  I found it
                easier to write SQL statements myself to work out what was happening in the model than to use
                array.filter() once joins were involved.  With a better tokeniser and an expanded grammar and a simple
                query planner it could be widely useful.</p>
                <p dir="ltr"><font color="#4c4c4c"><a href="https://github.com/williame/ludum_dare_27_snowden/blob/gh-pages/sql.js">sql.js</a></font>
                is doubtlessly more interesting than actually <font color="#4c4c4c"><a href="https://williame.github.io/ludum_dare_27_snowden/index.html">playing the game</a></font>
                ;)</p>
            </post-body>
 <button class="page-link" onclick="window.location='ludum-dare.html#59997353762'">ludum-dare</button>  <button class="page-link" onclick="window.location='index1.html#59997353762'">index</button> 

    <span class="post-metadata"><i>posted 2013-09-02</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/59476092289.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="59476092289">
    
</a>
<?xml version="1.0" ?><post-body><p><img alt="" src="https://www.ludumdare.com/compo/wp-content/compo2/273708/10313-shot0.jpg"/></p>
                <p>For the Ludum Dare game jam this weekend I made a <a href="http://www.ludumdare.com/compo/ludum-dare-27/?action=preview&amp;uid=10313" target="_blank">Snowden-themed
                game</a> :)</p>
                <p>You are an NSA Analyst and you have to move your agents onto flights to find Snowden and
                Assange as they try to reach safe havens.</p>
                <p>Some people imagine that the NSA computer systems are fancy semi-transparent virtual displays
                projected onto glass panes and controlled with gestures and eye movements.  Well, boy are they in for a
                surprise!  The truth is the NSA is still stuck on Windows GOV edition, which is based on Windows ME.
                 Clippy is in there too!  And their IT department will soon start an upgrade of the mail system to Lotus
                Notes!</p>
                <p><img alt="" src="https://www.ludumdare.com/compo/wp-content/compo2/273708/10313-shot1.jpg"/></p>
                <p>To be honest, the game is only for data junkies.  And data junkies are the kind of people who’d
                like a more subtly balanced and tuned model underneath, which you don’t get from a one weekend
                project.  So nobody is going to like it :/</p>
                <p>The very cool bit is there’s a fairly reasonably useable full SQL parser and runner.
                 You really can join across three tables, have simple expressions, do inserts and deletes and <em>hack</em>
                the international flight control databases…</p>
                <p>The Ludum Dare theme was “10 seconds”, but if you want 10 seconds you can
                go play the 2000 other game entries that take the theme seriously instead!</p>
            <p><a href="http://www.ludumdare.com/compo/ludum-dare-27/?action=preview&amp;uid=10313">NSA: Where's Snowden?</a></p></post-body>
 <button class="page-link" onclick="window.location='ludum-dare.html#59476092289'">ludum-dare</button>  <button class="page-link" onclick="window.location='index1.html#59476092289'">index</button> 

    <span class="post-metadata"><i>posted 2013-08-27</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/59177409349.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="59177409349">
    <h2 onclick="window.location='post/59177409349.html'">What does the NSA computer screen look like?</h2>
</a>
<?xml version="1.0" ?><post-body><p>My Ludum Dare 27 game entry is going to be you - the NSA “Analyst”
                - trying to corner Edward Snowdon for a bit of rendition.</p>
                <p>I’m going to add a globe to it - a rewrite from my ICBM game entry for the “real
                world” mini LD:</p>
                <p><img src="media/old/59177409349_1.jpg"/></p>

                <p>So what do you imagine the NSA computer screens to look like?  I’ve started with a
                retro Windows 95/ME look:</p>
                <p><img src="media/old/59177409349_1.png"/></p>
                <p>I’m about 4 hours of coding in, and I’m already getting nagging doubts
                about the visual style.  Perhaps people will prefer a futuristic modern star-trek UI with lots of solid
                fill rounded corner borders and semi-transparency and transition effects?</p>
            </post-body>
 <button class="page-link" onclick="window.location='ludum-dare.html#59177409349'">ludum-dare</button>  <button class="page-link" onclick="window.location='index1.html#59177409349'">index</button> 

    <span class="post-metadata"><i>posted 2013-08-24</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/59140606458.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="59140606458">
    <h2 onclick="window.location='post/59140606458.html'">I&#39;m going to enter the Ludum Dare 27 game-making competition and I&#39;m going to use ... SQL!
            </h2>
</a>
<?xml version="1.0" ?><post-body><p>Its 2 hours to go and I’ve not been able to sleep for hours.  So I’ve been writing
                some ‘framework’!</p>
                <p>And that framework turned out to be a little SQL parser and runner in … you’ve guessed it,
                Javascript!</p>
                <p><a href="https://gist.github.com/williame/013de5a1d8cc0a835220" target="_blank">Source
                here</a></p>
                <p>It supports basic joins-in-the-where-clause, column and table aliases and insert statements
                (with constraints!).</p>
                <p>It does type-coercion on insert in the same broken way that MySQL does.</p>
                <p>So as you see, I really am picking the best of all worlds: Javascript + SQL +
                MySQL bugsfeatures… what’s not to love?</p>
                <p>Maybe I have time to add DELETE and UPDATE before the LD starts and I need to work out some
                game to use all this awesomeness on… <img alt=":)" src="https://www.ludumdare.com/compo/wp-includes/images/smilies/icon_smile.gif"/></p>
                <p><a href="http://www.ludumdare.com/compo/2013/08/23/im-in-and-im-going-to-use-sql/" target="_blank">&lt;/smug twit&gt;</a></p>
            </post-body>
 <button class="page-link" onclick="window.location='ludum-dare.html#59140606458'">ludum-dare</button>  <button class="page-link" onclick="window.location='index2.html#59140606458'">index</button> 

    <span class="post-metadata"><i>posted 2013-08-23</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/57140204975.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="57140204975">
    <h2 onclick="window.location='post/57140204975.html'">Perlin Noise</h2>
</a>
<?xml version="1.0" ?><post-body><p>I’ve been trying to understand how to use noise to generate stuff like game
                worlds.  In the end, I needed to visualise the noise function itself:</p>
                <p><img src="media/old/57140204975_1.jpg"/></p>
                <p>So I made a quick cube spinner and I’ll put the viewer - possibly editor - into the
                next <a href="https://williame.github.io/barebones.js/" target="_blank">barebones.js</a>.</p>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#57140204975'">game</button>  <button class="page-link" onclick="window.location='index2.html#57140204975'">index</button> 

    <span class="post-metadata"><i>posted 2013-08-02</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/57181055984.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="57181055984">
    <h2 onclick="window.location='post/57181055984.html'">Perlin Noise</h2>
</a>
<?xml version="1.0" ?><post-body><p>I’ve added an interactive Perlin “Noise explorer” to
                <a href="https://williame.github.io/barebones.js/" target="_blank">barebones.js</a>.</p>
                <p>I had originally used the usual Simplex Noise Javascript port that is in <a alt="dead link: https://github.com/mrdoob/three.js/blob/master/examples/js/SimplexNoise.js" href="/#404" target="_blank">three.js</a>
                and elsewhere.</p>
                <p>I even ported - successfully - to asm.js!  FWIW, asm.js turned out to be much slower than the
                normal code; this isn’t code that benefits from being ported, it seems; the call overhead is
                quite high.  If you want a lot of noise, e.g. generate a 2D or 3D array in one go, then the asm.js might
                be much faster if the loop is inside asm.js, but as it was - for single samples - it was so much slower
                I abandoned it.</p>
                <p>I didn’t enjoy debugging my port to asm.js and I find all the coercion ugly, but it
                was trivially learnable and may be interesting yet e.g. spatial indices and priority queue heaps.</p>
                <p>But ultimately I wasn’t happy with the tunability of the Simplex Noise
                implementation.  So I instead set about making a very naive reimplementation of Ken Perlin’s
                <a href="https://mrl.nyu.edu/~perlin/doc/oscar.html#noise" target="_blank">classic C noise</a>
                in Javascript.</p>
                <p>This lets you set the number of octaves and the alpha and beta values for bumpiness (sometimes
                called persistence).  If you set the scale attribute manually you can even control the scaling of the
                component samples!</p>
                <p>It doubtless runs slower but, for reasonably small chunks of work its more than fast enough. 
                And barebones.js has a cool web-worker wrapper if you want to generate big chunks of noise
                asynchronously.</p>
                <p>I didn’t pay too much attention to GLSL noise - that’s applicable for
                rendering, but not so useful for generating game levels and so on where you really need your noise
                accessible to Javascript (and in webGL you can’t read back framebuffers).</p>
                <p>As a thought-experiment it ought to be possible to do a <a href="https://www.fractalforums.com/general-discussion-b77/distance-estimator-for-perlin-noise/msg64073/#msg64073" target="_blank">distance estimator </a>for Perlin Noise at any threshold.  This would help me
                shadow my visualisation nicely, but it would have rather more general advantages if it sped up making
                big chunks of noise too?</p>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#57181055984'">game</button>  <button class="page-link" onclick="window.location='index2.html#57181055984'">index</button> 

    <span class="post-metadata"><i>posted 2013-08-02</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/53831974133.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="53831974133">
    <h2 onclick="window.location='post/53831974133.html'">Drawing RTS maps fast</h2>
</a>
<?xml version="1.0" ?><post-body><p><img alt="image" src="media/old/53831974133_1.jpg"/></p>

                <p><em>Techie bit follows</em>, but first here’s some background:</p>
                <p>At high-school I played the defining Dune 2 RTS game, and then at college I played C&amp;C
                Tiberian Sun.  I poked around (internet was dial-up and slow in those days) and became part of the
                then-thriving game-modding community.  They had reverse-engined the Tiberian Sun model format, but no
                editors existed.  So I made one.  Will’s Voxel Editor, as it was called, was hugely popular in
                the limited world of Tiberian Sun modding.  I worked closely with a modder called Mr War - all modders
                had strange anonymous handles on-line in those days except me - and we made some really cool mods and
                games.</p>
                <p><!-- more --></p></post-body>
 <button class="page-link" onclick="window.location='game.html#53831974133'">game</button>  <button class="page-link" onclick="window.location='index2.html#53831974133'">index</button> 
<button class="page-link" onclick="window.location='post/53831974133.html'"><b>read&nbsp;more&nbsp;&rarr;</b></button>
    <span class="post-metadata"><i>posted 2013-06-25</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/49797579721.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="49797579721">
    <h2 onclick="window.location='post/49797579721.html'">WillCity update</h2>
</a>
<?xml version="1.0" ?><post-body><p><img alt="image" src="media/old/49797579721_1.jpg"/></p>

                <p><a href="post/49171822294.html" target="_blank">Previously</a>, <a href="post/20163196047.html" target="_blank">previously</a>.</p>
                <p>When run on local-host, the game runs four sims at once, in lock-step.  Three of them are test
                patterns, and the top left is for playing around.</p>
                <p>This makes it very easy to try out and tweak algorithms!</p>
                <p>The top-left layout - residential is red, industrial is pink and commercial blue - is supposed
                to be fairly optimal.  I want the algorithm to favour it, which you can see at the moment it does!</p>
                <p>The bottom left has more space between the zones, and road only on one side.  The algorithm
                should favour growth near the road, and at the moment it does!</p>
                <p>The bottom right is a very sub-optimal layout and I want the algorithm to punish it.
                 Commercial and industrial don’t like each other (although the commercial cares more than the
                industrial).</p>
                <p>The early sims are quite pleasing, but after a while - just a few years since my whole timeline
                thing is not quite set up - things get out of whack and success breeds success and it becomes a run-away
                chain reaction.  I need to think about levelling and damping and so on.</p>
                <p>I’ve been talking to the <a href="http://www.opencity.info/" target="_blank">OpenCity</a>
                devs and the way their algorithm works is:</p>
                <ol><li>each sim step, pick a random residential, commercial or industrial zone to re-score.
                 It doesn’t recompute the scores for all zones each time step.  Change is gradual.</li>
                <li>in a NxN grid, see if there are any of the other two zone types</li>
                <li>depending on the zone type, reward or penalise nearby other zone types</li>
                <li>if the reward is positive, there’s a small chance that the zone will level up</li>
                <li>if the reward is negative, there’s a small chance that the zone will level down</li>
                </ol><p>I have a slightly more computationally-expensive approach, although far from the
                simple balance in OpenCity:</p>
                <ol><li>each sim step, pick between 1 and N% of the RCI zones are re-scored</li>
                <li>for each re-scoring zone,</li>
                <li>perform a best-first search to determine all the other zones within reach</li>
                <li>the transport cost uses one of three transport cost layers - car_and_foot, bus and train.  The
                best-first search can jump between these layers at bus stops and train stations</li>
                <li>at this point I have a list of nearby zones for each type and how far it is away and its score
                and so on; a quite complicated and nuanced algorithm could use all this data.  For now, we do something
                rather simple:</li>
                <li>average the distance*score of each nearby zone type</li>
                <li>if the zone is residential, re-score = commerical_score + industrial_score +
                residential_score*0.1</li>
                <li>if the zone is commercial, re-score = residential_score - industrial_score +
                commercial_score*0.1</li>
                <li>and so on</li>
                <li>then, if the re-score is more than the current score, there’s a 25% probability that
                5% of the difference is added to the zone’s score</li>
                <li>and inverse for re-scoring down</li>
                <li>with some basic clamping</li>
                </ol>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#49797579721'">game</button>  <button class="page-link" onclick="window.location='index2.html#49797579721'">index</button> 

    <span class="post-metadata"><i>posted 2013-05-06</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/49171822294.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="49171822294">
    <h2 onclick="window.location='post/49171822294.html'">What I&#39;m working on</h2>
</a>
<?xml version="1.0" ?><post-body><p>My blog has been rather quiet recently… due mainly to renovation projects
                and that my hobby coding time - an hour here, a quarter there - has been on a special project:</p>
                <p>I’ve been trying to work out a lot of the concepts behind city-building games.  Here’s
                my hobby simulator so far:</p>
                <p><img src="media/old/49171822294_1.jpg"/></p>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#49171822294'">game</button>  <button class="page-link" onclick="window.location='index2.html#49171822294'">index</button> 

    <span class="post-metadata"><i>posted 2013-04-29</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/48129403865.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="48129403865">
    <h2 onclick="window.location='post/48129403865.html'">How to do 3D terrain for your game</h2>
</a>
<?xml version="1.0" ?><post-body><p>The <a href="https://github.com/williame/barebones.js" target="_blank">barebones.js</a>
                project contains a simple grid-based webGL-drawn terrain that serves as a ready-to-build-upon skeleton
                for your game:</p>
                <p><a href="https://williame.github.io/barebones.js" target="_blank"><em><img alt="image" src="media/old/48129403865_1.jpg"/></em></a></p>

                <h2>features</h2>
                <p>The demo shows:</p>
                <ul><li>turning a height-map into a mesh</li>
                <li>drawing it with webGL</li>
                <li>tiling - each grid-square can have a unique tile at any cardinal direction</li>
                <li>drawing grid lines (useful for debug)</li>
                <li>navigation with arrow-keys</li>
                <li>pan and rotate and zoom with the mouse</li>
                <li>top-down (with perspective) and 3D views</li>
                <li>working out what tile the user clicks on</li>
                <li>updating the map in real time</li>
                <li>how to compute normals from a height-map</li>
                <li>a very basic random terrain generator</li>
                </ul><p>We’ll cover each of these points below:</p>
                <h2>the map</h2>
                <p><img align="left" src="media/old/48129403865_1.png"/>
                The map is fundamentally a 2D <a href="https://en.wikipedia.org/wiki/Heightmap" target="_blank">height-map</a>. 
                If the map is, say, 100x100 squares then we’ll have 101x101 height points.</p>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#48129403865'">game</button>  <button class="page-link" onclick="window.location='index2.html#48129403865'">index</button> 

    <span class="post-metadata"><i>posted 2013-04-16</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/48137647814.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="48137647814">
    <h2 onclick="window.location='post/48137647814.html'">barebones.js updated</h2>
</a>
<?xml version="1.0" ?><post-body><p>It now includes a <a href="https://williame.github.io/barebones.js/" target="_blank">simple terrain demo</a>.  Hopefully its an ideal skeleton for turning into <em>your</em>
                RTS game!  Just add units…</p>
                <p><img alt="image" src="media/old/48137647814_1.jpg"/></p>
                <p>I will soon be blogging about how I did the terrain and the navigation of it and things like
                working out the tile under the mouse cursor.  Stay tuned.</p>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#48137647814'">game</button>  <button class="page-link" onclick="window.location='index2.html#48137647814'">index</button> 

    <span class="post-metadata"><i>posted 2013-04-16</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/45193855853.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="45193855853">
    <h2 onclick="window.location='post/45193855853.html'">Drawing things in the shadow of a sphere</h2>
</a>
<?xml version="1.0" ?><post-body><p>For the <a href="http://www.ludumdare.com/compo/minild-40/?action=preview&amp;uid=10313" target="_blank">Ludum Dare mini 40</a> competition - theme “The Real World”
                - I started on a launch-your-ICBMs game called “Mutual Assured Destruction”.  Anyone
                else a child of the cold war?</p>
                <p>I had this particular image in mind from the 80s film “<a href="https://www.imdb.com/title/tt0086567/" target="_blank">War Games</a>” where you
                see vector-graphic missile arcs incoming.  The graphics in that film really left a lasting impression on
                me, so I wanted to capture that feel:</p>
                <p><img alt="image" src="media/old/45193855853_1.jpg"/></p>
                <p><!-- more --></p></post-body>
 <button class="page-link" onclick="window.location='game.html#45193855853'">game</button>  <button class="page-link" onclick="window.location='index2.html#45193855853'">index</button> 
<button class="page-link" onclick="window.location='post/45193855853.html'"><b>read&nbsp;more&nbsp;&rarr;</b></button>
    <span class="post-metadata"><i>posted 2013-03-12</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/43800948133.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="43800948133">
    <h2 onclick="window.location='post/43800948133.html'">Efficient procedural flame particle effects</h2>
</a>
<?xml version="1.0" ?><post-body><p>I was playing the other month with making flame particle effects.  Lots of flame
                particle effects:</p>
                <p><iframe frameborder="0" height="256" src="http://www.youtube.com/embed/Em5gSVgKsBI?rel=0" width="341"> </iframe></p>
                <p>The challenge - in webGL - is to minimise the data transfer per frame.  So I created my flame
                effects procedurally using a random seed.</p>
                <p>I claim no invention nor credit; I based this upon a million Google searches and nothing I’ve
                done is unique; but is novel and fun for me so I share.</p>
                <p>What I did was create a single big VBO of random numbers.  I never updated this list of random
                numbers; I just kept re-using it.  Its an immutable list.  The list is as long as the maximum number of
                particles in any system.</p>
                <p>Then for each particle system I created a unique random number for it.  And a few other things
                like its position and size.</p>
                <p>To draw each system I computed the matrix so that, in its model coordinates, it was always
                drawing inside a -1,-1 -&gt; 1,1 square.   That just simplifies life inside the shaders.</p>
                <p>In vertex shader I use the per-system random number uniform combined with the per-vertex random
                number attribute to seed a random number generator to derive the particle’s attributes e.g.
                size, start-position, direction, colour etc.  I then had a uniform float ‘time’
                passed to determine the frame of animation to draw.</p>
                <p>In this way I could have lots - easily filling the whole screen with tens of thousands - of
                point-sprite-based fire particles and no two systems looked identical!</p>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#43800948133'">game</button>  <button class="page-link" onclick="window.location='index2.html#43800948133'">index</button> 

    <span class="post-metadata"><i>posted 2013-02-23</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/40512693117.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="40512693117">
    <h2 onclick="window.location='post/40512693117.html'">The Crown Jewels Job – Autopsy</h2>
</a>
<?xml version="1.0" ?><post-body><div>
                <p>Opening myself up here, but to be honest I’m deeply disappointed about our Ludum Dare
                game-making-contest score history. I expected more of us; we aimed higher, and we hoped to make
                something that would please and wow the crowd.</p>
                <p><img alt="" height="307" src="https://www.ludumdare.com/compo/wp-content/compo2/201083/10313-shot0.png" width="617"/></p>
                <p><a href="http://www.ludumdare.com/compo/ludum-dare-25/?action=preview&amp;uid=10313" target="_blank">And we abjectly failed, again.</a></p>
                <p>We’ve always aimed to challenge norms; in <a href="http://www.ludumdare.com/compo/ludum-dare-23/?action=preview&amp;uid=10313" target="_blank">LD23</a>
                we’d tried to put graphics into text adventures in an interesting, new way. We’ve tried to enter a
                multi-player on-line game in <a href="http://www.ludumdare.com/compo/ludum-dare-24/?action=preview&amp;uid=10313" target="_blank">LD24</a>, and we’ve tried in <a href="http://www.ludumdare.com/compo/ludum-dare-25/?action=preview&amp;uid=10313" target="_blank">LD25</a>
                to make a 2D platform game without tiles.</p>
                <p><em><strong>We really are overactive underachievers.</strong></em></p>
                <p>Our highest LD25 score was for music. We were perhaps not clear enough that that was the one
                thing we had not ourselves made <img alt=":(" src="https://www.ludumdare.com/compo/wp-includes/images/smilies/icon_sad.gif"/> It was a track we’d
                picked up on the Internet, and we thought we’d explained that.</p>
                <p>So why did we fail so miserably? <strong>Bad control.</strong>  We should have had
                a lot more and we lacked in plenty of areas, but I think that the playability was most affected by the
                bad control.</p>
                <p>Its fairly non-trivial to do collision with arbitrary lines and so on, and do it efficiently
                too. Our collision code, which we’d written for the game and mostly as the deadline loomed, was immature
                and incomplete. We should of course have learned how to code it before the jam, or borrowed a library or
                something.  But we’re not really borrowing-code-libraries kind-of-people.</p>
                <p>And what happens is that you do badly in a core area such as control and people voting just
                give you a low score across the board. We got 1.92 for innovation which just means we hid the code well
                I guess.</p>
                <p>I’m deeply saddened that we didn’t score higher for graphics, as I myself am in awe of my
                team-mate’s artistic prowess and thing it deserved more. A very big part of that is my fault, as I also
                didn’t get around to good GLSL lighting. Meaning the whole making the scene out of meshes thing didn’t
                work, and it was hard to see where the platforms were because of the uniform shading.</p>
                <p>In previous LDs the winners have always wowed me. I’ve always looked down the winners list and
                been awed and inspired. This time its been a whole lot, well, distanced. I don’t mean to take anything
                from the winners and everyone else in on the game; I think its in a large part because I didn’t find the
                theme exciting.</p>
                <p>We had had an alternative game that was a FarmRomanVilla thing; Zynga being villains and
                villain being a medieval French word for farm worker and all. All actually inspired by a recent episode
                of Time Team I’d watched where they excavated a Roman villa in Britain…  But whilst that was very much
                the kind of game I like making, I think it would have disappointed just as badly as the
                lets-make-a-platform-game,-they-always-do-well game that we tried.</p>
                <p>Its been a introspective start to the new year. Our strength is art and we do ok-ish at coding
                too, but general story and game-play, audio (we’re both terribly untalented musically) and overarching
                fun we fail miserably at.</p>
                <p>I know I’m supposed to end on a high note of future optimism and enthusiasm and a promise to
                try harder and come back next time. But its hard to muster the bravado. Time heals, so maybe we’ll be
                back for another beating; we’ll see.</p>
                </div>
            </post-body>
 <button class="page-link" onclick="window.location='ludum-dare.html#40512693117'">ludum-dare</button>  <button class="page-link" onclick="window.location='index2.html#40512693117'">index</button> 

    <span class="post-metadata"><i>posted 2013-01-14</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/38462176877.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="38462176877">
    <h2 onclick="window.location='post/38462176877.html'">The Crown Jewels Job</h2>
</a>
<?xml version="1.0" ?><post-body><p><em>Introducing</em> our game for the <a href="http://www.ludumdare.com/compo/ludum-dare-25/?action=preview&amp;uid=10313" target="_blank">Ludum
                Dare #25</a> competition:</p>
                <p><big><a href="https://williame.github.com/ludum_dare_25_you_are_the_villain/" target="_blank">The Crown Jewels Job!</a></big></p>
                <p><iframe frameborder="0" height="315" src="http://www.youtube.com/embed/W5T_mswWhnQ" width="420"> </iframe></p>
                <p>To think we made all this in just 72 hours?!</p>
                <p>The theme for the competition was “<em>you are the villain</em>”.</p>
                <p>We wanted to make a game that my young daughters could (be allowed to) play, which meant no
                blood and guts and swearing etc.  It had to be tame, innocent fun.  We settled on a very classic
                platform-game idea.  If you ‘die’, you actually go to prison.  Being cast as the
                baddie doesn’t mean you become a goodie, not when its made by a prudish dad like me!</p>
                <p>The artwork is excellent as usual, due entirely to my co-conspirator, the <a href="post/37291851878.html" target="_blank">usual suspect</a>.  The general engine - which I coded - whilst cool in that I
                made it from scratch, is not so great.</p>
                <p>If there’s a criticism of the game-play its the wrong-feeling control system.</p>
                <p><!-- more --></p></post-body>
 <button class="page-link" onclick="window.location='ludum-dare.html#38462176877'">ludum-dare</button>  <button class="page-link" onclick="window.location='index2.html#38462176877'">index</button> 
<button class="page-link" onclick="window.location='post/38462176877.html'"><b>read&nbsp;more&nbsp;&rarr;</b></button>
    <span class="post-metadata"><i>posted 2012-12-21</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/38051204853.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="38051204853">
    <h2 onclick="window.location='post/38051204853.html'">Dave the Dastard: Ludum Dare 25 - end of day one</h2>
</a>
<?xml version="1.0" ?><post-body><p>That’s just a working title…</p>
                <p>We struggled a bit with this year’s theme: You are the villain</p>
                <p>We really wanted to make something my daughters can play, and I don’t really like the
                baddies winning out.</p>
                <p>In the end we decided to pretty much make a nice little tame platform game, and pay little
                attention to the theme.</p>
                <p>As usual, I’ve written thousands of lines of tooling code, and almost no game code! 
                Our artist, on the other hand, has made gazillions of assets at his usual unbelievable pace.</p>
                <p><iframe frameborder="0" height="315" src="http://www.youtube.com/embed/7O5PpYcFSOc" width="420"> </iframe></p>
                <p>We made a platform game for <a href="post/16322614828.html" target="_blank">LD mini 31</a>, but this time its completely different!</p>
                <p>This time its written in Javascript.  The neatest thing is that our artist is able to edit
                levels and add assets straight from the browser, rather than emailing them to me!  Ah the magic of my
                little git web server.</p>
            </post-body>
 <button class="page-link" onclick="window.location='ludum-dare1.html#38051204853'">ludum-dare</button>  <button class="page-link" onclick="window.location='index2.html#38051204853'">index</button> 

    <span class="post-metadata"><i>posted 2012-12-16</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/36660467688.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="36660467688">
    <h2 onclick="window.location='post/36660467688.html'">Rendering Spheres with Triangles</h2>
</a>
<?xml version="1.0" ?><post-body><p>Creating spheres programmatically has turned up a <a href="http://twistedoakstudios.com/blog/?p=1080" target="_blank">couple</a> <a href="https://gamedev.stackexchange.com/questions/16585/how-do-you-programmatically-generate-a-sphere" target="_blank">of</a> times recently.  So here are my own notes:</p>
                <p>There are two general approaches:</p>
                <p><img height="94" src="https://i.stack.imgur.com/kSSSF.png" width="200"/></p>
                <p>The leftmost is termed the <em><strong>uv-sphere</strong></em> and the
                rightmost an <em><strong>icosphere</strong></em>.</p>
                <p>The uv-sphere looks like a globe. For many purposes it is perfectly fine, but for some use
                cases, e.g. if you want to deform the sphere, it is disadvantageous that the density of vertices is
                greater around the poles.  The icosphere vertices are distributed evenly.</p>
                <p>GLUT tends to use the uv approach: look at the function <code>glutSolidSphere()</code>
                in the <a alt="dead link: http://freeglut.svn.sourceforge.net/viewvc/freeglut/trunk/freeglut/freeglut/src/freeglut_geometry.c?revision=926&amp;view=markup" href="/#404" target="_blank">freeglut sourcecode</a>.</p>
                <p>And <strong>webGL</strong> doesn’t have <code>glutSolidSphere()</code>. 
                Oh well.  <strong><a href="https://gist.github.com/4153824" target="_blank">Here’s
                my code for creating an untextured icosphere online</a>.</strong></p>
                <p>Here is an excellent article on producing an icosphere: <a href="http://blog.andreaskahler.com/2009/06/creating-icosphere-mesh-in-code.html" target="_blank">http://blog.andreaskahler.com/2009/06/creating-icosphere-mesh-in-code.html</a></p>
                <p>I’ve also experiemented with tiling spheres for RTS games etc.  Here’s an
                excellent guide to how you might divide the sphere surface into zones: <a alt="dead link: http://kiwi.atmos.colostate.edu/BUGS/geodesic/text.html" href="/#404" target="_blank">http://kiwi.atmos.colostate.edu/BUGS/geodesic/text.html</a></p>
                <p>Finally, texturing.  <a href="http://vterrain.org/Textures/spherical.html" target="_blank">http://vterrain.org/Textures/spherical.html</a>
                gives an excellent description of how you might choose to texture them, and <a href="https://www.iquilezles.org/www/articles/patchedsphere/patchedsphere.htm" target="_blank">http://www.iquilezles.org/www/articles/patchedsphere/patchedsphere.htm</a>
                is - as iñigo is - brilliant.</p>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#36660467688'">game</button>  <button class="page-link" onclick="window.location='index3.html#36660467688'">index</button> 

    <span class="post-metadata"><i>posted 2012-11-27</i></span>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/35858593837.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="35858593837">
    <h2 onclick="window.location='post/35858593837.html'">tic-tac-toe</h2>
</a>
<?xml version="1.0" ?><post-body><p>My daughters have made a little tic-tac-toe game.  Its a little 3x3 board, played
                with 3 coloured stones each.  You take turns to place stones and try and get 3-in-a-row, as in
                tic-tac-toe.  But when you make your forth move onwards, as you have only three stones, you move a stone…</p>
                <p>And, as I was playing against them, I began to brute-force it in my head…  well, you
                would too!</p>
                <p>Of course I had difficulty stopping thinking about this little game, and ended up seeking
                closure by implementing a <a href="https://gist.github.com/4087469" target="_blank">Python solver</a>
                in my lunch-break.</p>
                <p>It was very clensing coding.  Its nice to return to noddy, pure problems sometimes.  My biggest
                hurdle was making sure I canonicalise the board so that rotations and mirrorings are not mistaken for
                new positions.  I opted for a simple generator that produced all mirrorings and rotations and simply
                checked to see if any of them had been seen before.</p>
                <p>My code run first time!  No typos, and seeming to be doing what I wanted, and from random
                inspection of outputted board positions to next moves, it seemed correct.</p>
                <p>There are 744 boards and 4361 moves.</p>
                <p>But how would you visualise it?  Sounds like a job for graphviz!  It was simplicity itself to
                just change my printouts to print a dot file instead.</p>
                <p>And then dot chewed on it for half an hour and then seg-faulted.</p>
                <p>I tried other graphviz tools (which treat the graph as undirected), but was unhappy with their
                output:</p>
                <p><img height="249" src="https://i.stack.imgur.com/orvyk.png" width="314"/></p>
                <p><img height="972" src="https://i.stack.imgur.com/GJfeQ.png" width="957"/></p>
                <p>I asked for help on <a href="https://stackoverflow.com/questions/13417411/laying-out-a-large-graph-with-graphviz" target="_blank">StackOverflow</a>.</p>
                <p>And a chap kindly showed me a zoomed-out layout that works:</p>
                <p><img height="1032" src="https://i.stack.imgur.com/L4LJ3.png" width="1250"/></p>
                <p>At that ridiculous zoom, there’s a definite pattern there…</p>
                <p>Only problem is, whilst I can get graphviz to generate that chart, I can’t view it!</p>
                <p>The image is a monster.  PNG 20380x16854, 59.73MB compressed …</p>
                <p>I hit swap as soon as I try and view it in all the image viewers I can find.</p>
                <p>I mulled the problem a bit and imagined simplifying the problem.  You could, for example, start
                pruning pointless moves and those moves that allow the opponent to immediately win and so on.</p>
                <p>But distilling the winning moves seems like a cop-out.  These days, big data shouldn’t
                be scary!</p>
                <p>I considered making my own image-manipulation code.  But that quickly gets into making your own
                layout engine too, and … well, I welcome anyone who can master graphviz and has more RAM than
                I :)</p>
            </post-body>
 <button class="page-link" onclick="window.location='game.html#35858593837'">game</button>  <button class="page-link" onclick="window.location='index3.html#35858593837'">index</button> 

    <span class="post-metadata"><i>posted 2012-11-16</i></span>
</div>


    
        
        <div class="index-bar">
        <button class="page-prev-link page-link" onclick="window.location='rec.html'">&larr;&nbsp;prev</button>
        <div class="pages-index">page 2 of 4</div>
        <button class="page-next-link page-link" onclick="window.location='rec2.html'">next&nbsp;&rarr;</button>
        </div>
    

</div>


<div class="column">
    <div class="page-map">
        <h1 style="text-align: center">jump to &darr;</h1>
        <hr/>
        
            <div class="page-link" onclick="window.location='index.html'">main&nbsp;page&nbsp;&uarr;</div>
            <hr/>
        
        
            


        
            

    <div class="page-map-branch">
    <b>performance</b>
        
            <img class="feather" src="static/icons/bar-chart-2.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/172424230628.html'">Faster searches with non-prefix fields in composite indices</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/160628887798.html'">Compressing MySQL databases</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53836725910.html'">What highscalability.com says about Scaling my Server</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53751799442.html'">Scaling my Server: follow-up</div>
                
            
                
                    <div class="page-link" onclick="window.location='perf.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


        
            

    <div class="page-map-branch">
    <b>old classics</b>
        
            <img class="feather" src="static/icons/book-open.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/49786413417.html'">The kid&#39;s computer</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/37291851878.html'">Making the History of Worlds Religions map</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/25564136097.html'">If you defend those involved in the OpenGL ES specification, you are an idiot</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/25426541504.html'">Stackoverflow unwinding?</div>
                
            
                
                    <div class="page-link" onclick="window.location='classic.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


        
            

    <div class="page-map-branch">
    <b>general</b>
        
            <img class="feather" src="static/icons/terminal.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/134911547413.html'">Why Swift?</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/94734034483.html'">Python annotations and type checking</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/86488099258.html'">pycon 2014 Sweden: the bad bits</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/78636919764.html'">Table-based Template Translation in C++</div>
                
            
                
                    <div class="page-link" onclick="window.location='lang.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


        
            

    <div class="page-map-branch">
    <b>recreation</b>
        
            <img class="feather" src="static/icons/youtube.svg"/>
        
        
            <div class="page-link" onclick="window.location='rec.html'">all&nbsp;&rarr;</div>
            <div class="page-map-section">
            
                

    <div class="page-map-branch">
    <b>games programming</b>
        
            <img class="feather" src="static/icons/play.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/57140204975.html'">Perlin Noise</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/57181055984.html'">Perlin Noise</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53831974133.html'">Drawing RTS maps fast</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/49797579721.html'">WillCity update</div>
                
            
                
                    <div class="page-link" onclick="window.location='game.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


            
                

    <div class="page-map-branch">
    <b>ludum-dare</b>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/143376853353.html'">Ludum Dare #35 Mosaic</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/127137593983.html'">LudumDare 33 wallpapers</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/117234199303.html'">SSIM vs MSE for Mosaics</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/97634254788.html'">Ludum Dare 30 results are in!</div>
                
            
                
                    <div class="page-link" onclick="window.location='ludum-dare.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


            
            </div>
        
    </div>


        
        
    </div>
</div>
</div>
</body>
</html>