<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <title>Will Edward&#39;s Programming: mosaic</title>
    <link rel="stylesheet" type="text/css" href="static/style.css"/>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-27302158-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-27302158-1');
    </script>

</head>
<body>
<div class="content">
<div class="column">
    <div style="width: 90%;" class="page-link" onclick="window.location='index.html'">
    <h1>Will Edwards<br/><i>programming</i></h1>
    </div>
    <p>Always loved programming - its like Lego without gravity.</p>
    <p>Basic on my ZX81 graduating to assembler and Turbo Pascal during my teens.</p>
    <p>Developed phone OS software - engineer, architect, product manager - but got made irrelevant by the
        iPhone and redundant by Android.</p>
    <p style="font-size: 16pt; width:90%;">These days I mostly work with <b>data</b>, <b>big data</b> and <b><i>fitting big data onto small boxes</i></b>.</p>
</div>
<div class="posts-column column">
    <div class="page-title">
    <h1>mosaic</h1>
    
    

    </div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/143376853353.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="143376853353">
    <h2 onclick="window.location='post/143376853353.html'">Ludum Dare #35 Mosaic</h2>
</a>
<?xml version="1.0" ?><post-body><p>Its becoming a Ludum Dare tradition that I make a mosaic for each competition. I
                didn’t enter this time, but I still made a nice mosaic:</p><img data-orig-height="282" data-orig-width="320" src="media/old/143376853353_1.jpg"/>
            </post-body>
 <button class="page-link" onclick="window.location='rec.html#143376853353'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#143376853353'">ludum-dare</button>  <button class="page-link" onclick="window.location='index.html#143376853353'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/127137593983.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="127137593983">
    <h2 onclick="window.location='post/127137593983.html'">LudumDare 33 wallpapers</h2>
</a>
<?xml version="1.0" ?><post-body><p>Aurel Bílý made this nice wallpaper, and <a alt="dead link: http://thenet.sk/?blog/0007" href="/#404">told
                us how he did it</a>:<br/></p><img data-orig-height="500" data-orig-width="500" src="media/old/127137593983_1.png"/><p>Here are a couple of mosaics I
                made from the LD32 thumbnails:</p><img data-orig-height="1428" data-orig-width="3350" src="media/old/127137593983_1.jpg"/><img data-orig-height="1617" data-orig-width="2784" src="media/old/127137593983_2.jpg"/>
            </post-body>
 <button class="page-link" onclick="window.location='rec.html#127137593983'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#127137593983'">ludum-dare</button>  <button class="page-link" onclick="window.location='index.html#127137593983'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/117234199303.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="117234199303">
    <h2 onclick="window.location='post/117234199303.html'">SSIM vs MSE for Mosaics</h2>
</a>
<?xml version="1.0" ?><post-body><img data-orig-height="125" data-orig-width="600" src="media/old/117234199303_1.jpg"/><p>(On the left, a target image.
                 On the right, a <a alt="dead link: http://ludumdare.com/compo/2015/04/22/i-made-a-list-of-games-you-should-play/" href="/#404">mosaic made from
                thumbnails of all the Ludum Dare 32 games</a>, positioned using an MSE score metric.)</p><p>Making
                mosaics is in two steps:</p><ol><li>score each tile in each position</li><li>determine
                the optimal positioning of all tiles to maximize the total likeness</li></ol><p>The
                second part is easy (although I tried imprecise approximations at first, and only discovered it fairly
                recently): use the <a href="https://en.wikipedia.org/wiki/Hungarian_algorithm">Hungarian Algorithm</a>.</p><p>Its
                that first step that’s tricky.</p><p>I have been using <a href="https://en.wikipedia.org/wiki/Mean_squared_error">Mean Square Error (MSE)</a> and have
                been fairly happy with the result.  But readers have pondered if there aren’t better metrics that better
                account for shape and contrast and such…</p><p>So to please some Ludum Darers
                (and because I was curious), I tried out some algorithms.</p><p>First, <a alt="dead link: http://Peak%20signal-to-noise%20ratio" href="/#404">Peak Signal to Noise Ratio (PSNR)</a> is just a
                rephrasing of MSE and the results are much the same.</p><p>Second, I tried <a href="https://en.wikipedia.org/wiki/Structural_similarity">Structural Similarity (SSIM) index</a>.
                 This was a promising avenue to explore.  My mosaic maker is Python and there’s a scikit helper, but
                scikit doesn’t work with pypy (and neither does a stock numpy; trying to get the mosaic maker to work
                happily in pypy with these kinds of dependencies has been a nightmare).  In the end I went with pyssim
                which turned out to not work in pypy either due to dependencies but I stuck with it on cpython anyway.
                 Its about 4x slower than MSE and most of the cost seems to be comparison overhead and not really
                affected by how big the patches I compared were.</p><p>SSIM is actually working in luma (eh
                fancy term for grayscale) and trying to account for shape not colour.</p><p>The results:</p><img alt="image" data-orig-height="200" data-orig-width="387" src="media/old/117234199303_2.jpg"/><p>(On the left, the
                original.  In the middle, MSE.  And on the right, SSIM.  Tiles are the thumbnails of <b><a href="http://ludumdare.com/compo/ludum-dare-32/">2819 Ludum Dare 32 games</a></b>
                (omitting 2 games with broken thumbnails!))</p><p>So I tried blending the MSE and SSIM
                scores (suitably scaled of course) but couldn’t get even a little bit of SSIM to help:</p><img alt="image" data-orig-height="200" data-orig-width="137" src="media/old/117234199303_3.jpg"/><p>(Here 70% MSE and
                30% SSIM.  I even tried 8% SSIM and it looked much the same.)</p><p>I also tested using the
                YCbCr colour-space too; results were much the same (as all the tiles are screenshots they are invariably
                natively RGB; if the tiles were made from photos there’s a good chance that YUV makes much more sense).</p><p>Now
                I am making a novice interpretation of this but my guess is that in mosaics, which are best viewed from
                a great distance where the tiles are increasingly pixel-sized, tile colour dominates over shapes within
                the tile?</p>
            </post-body>
 <button class="page-link" onclick="window.location='rec.html#117234199303'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#117234199303'">ludum-dare</button>  <button class="page-link" onclick="window.location='index.html#117234199303'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/95981602928.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="95981602928">
    <h2 onclick="window.location='post/95981602928.html'">All the LD30 games in one mosaic!</h2>
</a>
<?xml version="1.0" ?><post-body><p>I updated my <a href="post/84505278488.html">mosaic script</a>
                to consider rotations of three tiles as well as straight swaps.  To be honest, its diminishing returns,
                but the mosaic is one of the prettiest yet:</p>
                <p><a alt="dead link: http://www.ludumdare.com/compo/2014/08/27/all-ld30-games-in-this-mosaic/" href="/#404"><img data-orig-height="255" data-orig-width="500" src="media/old/95981602928_1.jpg"/></a></p>
                <p><a alt="dead link: http://www.ludumdare.com/compo/2014/08/27/all-ld30-games-in-this-mosaic/" href="/#404">More
                on the LD web site :)</a></p>
            </post-body>
 <button class="page-link" onclick="window.location='rec.html#95981602928'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#95981602928'">ludum-dare</button>  <button class="page-link" onclick="window.location='index.html#95981602928'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/95981048318.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="95981048318">
    <h2 onclick="window.location='post/95981048318.html'">Connecting Ludum Dare to the Real World</h2>
</a>
<?xml version="1.0" ?><post-body><p><a href="http://www.ludumdare.com/compo/" target="_blank">Ludum Dare</a> is
                a really popular game making contest.  Three or so times a year several thousand competitors all over
                the world wait for the theme to be announced and the contest to start!</p>
                <p>Last weekend was the 30th contest (LD30) and the theme was “Connected Worlds”.</p>
                <p>The <a href="http://www.ludumdare.com/compo/2014/08/16/ludum-dare-30-theme-voting-begins/" target="_blank">voting</a> wasn’t even close, which is a shame as I was very lukewarm
                to the theme.  I feared there’d be lots of platform games where you run two levels in
                parallel, or can swap between levels, etc.</p>
                <p>And that’s what 90% of games are, sadly.  I don’t mean they are bad games -
                many of them are really exceptionally good! - I just mean the theme lent itself to a very literal
                interpretation.</p>
                <p>My interpretation was to try and connect Ludum Darers to the <em>real</em> world
                instead :)</p>
                <p>I recalled that hidden away on the LD website was a map where LDers could record their position
                on a map.  It was not terribly well known, but there were several hundred player’s latitude
                and longitude in there.  It was enough to make sure that any map wasn’t completely empty for
                the first player…</p>
                <p>So I made a ‘game’ where you report your position, and then see other
                contestants near you and can browse LD games on the real world map.</p>
                <p>The game aspect is the gamification of rating LD games.  In order to discover the overall LD
                winner, contestants play each other’s games and rate them.  They have 3 weeks to do this, and
                then the standings are announced.  And I wanted to encourage that participation, as there’s
                really games that go unplayed and contestants that don’t play.</p>
                <p>I scrape the LD website and, as a proxy for rating others games, I note who has commented on
                whom.  As well as rating games you can comment on games, and whilst these are distinct they are often
                done together.</p>
                <p>So I draw the map with line art, and use a GL stencil buffer to expose an underlying map where
                you’ve commented on games or others have commented on your game:</p>
                <p><a href="http://www.ludumdare.com/compo/ludum-dare-30/?action=preview&amp;uid=10313"><img alt="image" data-orig-height="223" data-orig-width="500" src="media/old/95981048318_1.png"/></a></p>
                <p><strong><a href="http://www.ludumdare.com/compo/ludum-dare-30/?action=preview&amp;uid=10313">Play
                it online here!</a></strong>  If you’re not an LD player, you can <em>pretend</em>
                to be!</p>
                <p>The map that you expose is illustrated by me and the usual suspect, who goes by the handle <a href="post/30793134312.html" target="_blank">Wombatica</a> on the LD site.</p>
                <p>I’ve been overwelmed by the popular appeal and compliments!  I hadn’t
                expected to get so many appreciative LDers!  I’ve been rated over 150 times already, which is
                many times the ratings I’ve received on previous contests.  People keep coming back, and
                people keep checking progress.</p>
                <p><a href="http://www.ludumdare.com/compo/ludum-dare-30/?action=preview&amp;uid=10313">People
                are saying</a> the nicest things too!  Here’s some of the over-the-top ones :)</p>
                <blockquote>
                <ul><li>WOW. Now that is original. Genius. I’ll be playing it for the next few
                weeks.</li>
                <li>Hah, what an awesome idea, gamification of Ludum Dare! This it how I’m going to vote
                all entries from now, keeps voting fun! </li>
                <li>Thumbs up for innovation/originality!</li>
                <li>super awesome idea, have all my stars!</li>
                <li>Now the fourth wall have been shattered.  thank you.</li>
                <li>Will - really, really good job… This should win I think, just for the sheer cheek
                of subverting the idea and pointing LD at itself, can see this becoming a favourite interface for LD in
                the future… very great !</li>
                <li>You made playing games a game, that’s a 5 stars on innovation, no doubt. Also,
                connecting the LD world with the real world… Another 5 stars for theme!</li>
                <li>Man. This is SO neat! This game wins like all of the LDs. Amazing job!</li>
                <li>I gave you an award on your profile for this game.</li>
                <li>Oh my god this is briljant!</li>
                </ul></blockquote>
                <p>Oh there’s more.  <em><a href="http://www.ludumdare.com/compo/ludum-dare-30/?action=preview&amp;uid=10313">Lots more :)</a></em>
                 Now excuse me while I float off ecstatically tired…</p>
            </post-body>
 <button class="page-link" onclick="window.location='rec.html#95981048318'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#95981048318'">ludum-dare</button>  <button class="page-link" onclick="window.location='index.html#95981048318'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/84505278488.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="84505278488">
    <h2 onclick="window.location='post/84505278488.html'">Making Image Mosaics</h2>
</a>
<?xml version="1.0" ?><post-body><p><a href="https://www.ludumdare.com/compo/wp-content/uploads/2014/04/29.mona_lisa.timed_.png" target="_blank"><img align="right" alt="image" data-orig-height="157" data-orig-width="200" src="media/old/84505278488_1.jpg"/></a>As
                followers of the blog know (thx for the mails!), I’ve been making mosaics of <a href="http://www.ludumdare.com/compo" target="_blank">Ludum Dare</a> <a alt="dead link: http://www.ludumdare.com/compo/2014/05/01/your-game-here-2/" href="/#404" target="_blank">contest entries</a>.
                 It <a href="post/71966020187.html">started</a>
                <a href="post/84225291373.html">basic</a>,
                and its got <a href="post/84317701363.html">better</a>.
                 Each of the ‘pixels’ in the Mona Lisa is actually a screenshot of a game!  <em><strong>Here’s
                how</strong></em>:</p>
                <p>We have an target image, for example the Mona Lisa, and we have some large number of small
                input images which we want to arrange so that, when squinted at from a distance, it approximates the
                target image.</p>
                <p><!-- more --></p></post-body>
 <button class="page-link" onclick="window.location='rec.html#84505278488'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#84505278488'">ludum-dare</button>  <button class="page-link" onclick="window.location='index.html#84505278488'">index</button> 
<button class="page-link" onclick="window.location='post/84505278488.html'"><b>read&nbsp;more&nbsp;&rarr;</b></button>
</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/84317701363.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="84317701363">
    
</a>
<?xml version="1.0" ?><post-body><p><strong>UPDATE:</strong> <a href="post/84505278488.html">blog post
                describing how these mosaics are made</a></p>
                <p>I knew my <a href="https://gist.github.com/williame/8219574" target="_blank">mosaic
                script</a> was doing a poor job of placing the images.</p>
                <p>The approach it’d be taking was <em>greedy</em>: it’d place the
                closest matching image on its tile, and then the next closest matching and so on.  The outcome in in the
                middle column above.</p>
                <p>After talking a bit with <a href="http://www.royvanrijn.com/" target="_blank">Roy</a>,
                I couldn’t really leave it doing such a poor job.</p>
                <p>So in what way is the <em>greedy</em> approach sub-optimal?  It may be that
                swapping two images or three or more images around will lead to a lower overall error score.</p>
                <p>And what’s the simplest improvement to make?  Rather than tackling the true dynamic
                programming or other classic approach to optimisation, I simply went for random swaps.</p>
                <p>The script will now perform random swaps if they improve the image, until you interrupt it with
                ^C.</p>
                <p>And the results, as seen in the left column above, are stunning :)</p>
            <p><a href="media/old/84317701363_2.jpg"><img src="media/old/84317701363_3.jpg"/></a></p></post-body>
 <button class="page-link" onclick="window.location='rec.html#84317701363'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#84317701363'">ludum-dare</button>  <button class="page-link" onclick="window.location='index1.html#84317701363'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/84225291373.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="84225291373">
    
</a>
<?xml version="1.0" ?><post-body><p>The mosaic is made (<a href="https://gist.github.com/williame/8219574" target="_blank">sourcecode</a>) from the screenshots from <a href="http://www.ludumdare.com/compo/ludum-dare-29/" target="_blank">Ludum Dare 29</a>, to the
                theme “Beneath the Surface”.  The green turtle is from <a href="https://en.wikipedia.org/wiki/File:Chelonia_mydas_and_bubbles.jpg" target="_blank">wikipedia</a>.</p>
            <p><a href="media/old/84225291373_2.jpg"><img src="media/old/84225291373_3.jpg"/></a></p></post-body>
 <button class="page-link" onclick="window.location='rec.html#84225291373'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#84225291373'">ludum-dare</button>  <button class="page-link" onclick="window.location='index1.html#84225291373'">index</button> 

</div>

<div class="post">
<div class="maximize-post" onclick="window.location='post/71966020187.html'"><img src="static/icons/maximize-2.svg"/></div>
<a name="71966020187">
    
</a>
<?xml version="1.0" ?><post-body><p>Not a terribly bad likeness?  (My code made the top one ;)</p>
                <p>Its the over 2000 thumbnails from Ludum Dare 28 (<a href="http://www.ludumdare.com/compo/ludum-dare-28/?action=preview&amp;uid=10313">my game entry</a>),
                placed greedily by <a href="https://en.wikipedia.org/wiki/Peak_signal-to-noise_ratio">MSE</a>.
                 <a href="https://gist.github.com/williame/8219574">Here’s</a> a little Python
                script I quickly knocked up.</p>
            <p><a href="media/old/71966020187_2.jpg"><img src="media/old/71966020187_3.jpg"/></a></p></post-body>
 <button class="page-link" onclick="window.location='rec.html#71966020187'">rec</button>  <button class="page-link" onclick="window.location='ludum-dare.html#71966020187'">ludum-dare</button>  <button class="page-link" onclick="window.location='index1.html#71966020187'">index</button> 

</div>


    

</div>


<div class="column">
    <div class="page-map">
        
            <div class="page-link" onclick="window.location='index.html'">main&nbsp;page&nbsp;&uarr;</div>
            <hr/>
        
        
            


        
            

    <div class="page-map-branch">
    <b>performance</b>
        
            <img class="feather" src="static/icons/bar-chart-2.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/172424230628.html'">Faster searches with non-prefix fields in composite indices</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/160628887798.html'">Compressing MySQL databases</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53836725910.html'">What highscalability.com says about Scaling my Server</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53751799442.html'">Scaling my Server: follow-up</div>
                
            
                
                    <div class="page-link" onclick="window.location='perf.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


        
            

    <div class="page-map-branch">
    <b>old classics</b>
        
            <img class="feather" src="static/icons/book-open.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/49786413417.html'">The kid&#39;s computer</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/37291851878.html'">Making the History of Worlds Religions map</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/25564136097.html'">If you defend those involved in the OpenGL ES specification, you are an idiot</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/25426541504.html'">Stackoverflow unwinding?</div>
                
            
                
                    <div class="page-link" onclick="window.location='classic.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


        
            

    <div class="page-map-branch">
    <b>general</b>
        
            <img class="feather" src="static/icons/terminal.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/134911547413.html'">Why Swift?</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/94734034483.html'">Python annotations and type checking</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/86488099258.html'">pycon 2014 Sweden: the bad bits</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/78636919764.html'">Table-based Template Translation in C++</div>
                
            
                
                    <div class="page-link" onclick="window.location='lang.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


        
            

    <div class="page-map-branch">
    <b>recreation</b>
        
            <img class="feather" src="static/icons/youtube.svg"/>
        
        
            <div class="page-link" onclick="window.location='rec.html'">all&nbsp;&rarr;</div>
            <div class="page-map-section">
            
                

    <div class="page-map-branch">
    <b>games programming</b>
        
            <img class="feather" src="static/icons/play.svg"/>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/57140204975.html'">Perlin Noise</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/57181055984.html'">Perlin Noise</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/53831974133.html'">Drawing RTS maps fast</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/49797579721.html'">WillCity update</div>
                
            
                
                    <div class="page-link" onclick="window.location='game.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


            
                

    <div class="page-map-branch">
    <b>ludum-dare</b>
        
        
            <div class="page-map-section">
            
                
                    <div class="page-map-leaf" onclick="window.location='post/143376853353.html'">Ludum Dare #35 Mosaic</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/127137593983.html'">LudumDare 33 wallpapers</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/117234199303.html'">SSIM vs MSE for Mosaics</div>
                
            
                
                    <div class="page-map-leaf" onclick="window.location='post/97634254788.html'">Ludum Dare 30 results are in!</div>
                
            
                
                    <div class="page-link" onclick="window.location='ludum-dare.html'">more&nbsp;&rarr;</div>
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
                
            
            </div>
        
    </div>


            
            </div>
        
    </div>


        
        
    </div>
</div>
</div>
</body>
</html>